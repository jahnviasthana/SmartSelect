{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Select</title>

  <!-- Load CSS -->
  <link rel="stylesheet" href="{% static 'css/landing_page.css' %}">
  <link rel="stylesheet" href="{% static 'css/laptop_page.css' %}">
   

 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="{% static 'images/landing_logo.png' %}" alt="Smart Select Logo" style="height: 50px;">
        Smart Select
      </div>
      <ul class="nav-links">
        <li><a href="{% url 'about' %}" class="about-link">About</a></li>
      </ul>
      <div class="menu-right">
        <a href="{% url 'login' %}" class="signin-link">Sign In</a>
      </div>
    </nav>
  </header>
 
    <section class="hero">
      <h4>Welcome to <span class="highlight">Smart Select  </span> Laptop prediction page.</h4>
      <p>Get an accurate estimate of your laptop's price based on its specifications with <strong>Smart Select</strong></p> 

</section>
 
<!-- <form action="{% url 'laptop' %}" method="POST">
  {% csrf_token %}

  <label for="company">Company:</label>
  <select id="company" name="company" required>
      <option value="Lenovo">Lenovo</option>
      <option value="Dell">Dell</option>
      <option value="Asus">Asus</option>
      <option value="Acer">Acer</option>
      <option value="HP">HP</option>
      <option value="Apple">Apple</option>
      <option value="Toshiba">Toshiba</option>
      <option value="MSI">MSI</option>
      <option value="Samsung">Samsung</option>
      <option value="Mediacom">Mediacom</option>
      <option value="Vero">Vero</option>
      <option value="Xiaomi">Xiaomi</option>
      <option value="Razer">Razer</option>
  </select>

  <label for="typename">Type:</label>
  <select id="typename" name="typename" required>
      <option value="Notebook">Notebook</option>
      <option value="Ultrabook">Ultrabook</option>
      <option value="2 in 1 Convertible">2 in 1 Convertible</option>
      <option value="Gaming">Gaming</option>
      <option value="Netbook">Netbook</option>
      <option value="Workstation">Workstation</option>
  </select>

  <label for="ram">RAM (GB):</label>
  <select id="ram" name="ram" required>
      <option value="4">4 GB</option>
      <option value="8">8 GB</option>
      <option value="16">16 GB</option>
      <option value="32">32 GB</option>
  </select>

  <label for="weight">Weight (kg):</label>
  <input type="number" id="weight" name="weight" step="0.1" min="0" max="10" required>

  <label for="touchscreen">Touchscreen:</label>
  <select id="touchscreen" name="touchscreen" required>
      <option value="1">Yes</option>
      <option value="0">No</option>
  </select>

  <label for="ips">IPS:</label>
  <select id="ips" name="ips" required>
      <option value="1">Yes</option>
      <option value="0">No</option>
  </select>

  <label for="resolution">Screen Resolution:</label>
  <select id="resolution" name="resolution" required onchange="calculateResolution()">
      <option value="2560x1600">2560x1600</option>
      <option value="1440x900">1440x900</option>
      <option value="1920x1080">1920x1080</option>
      <option value="2880x1800">2880x1800</option>
      <option value="1366x768">1366x768</option>
      <option value="3200x1800">3200x1800</option>
  </select>

  <input type="hidden" id="x_res" name="x_res">
  <input type="hidden" id="y_res" name="y_res">

  <label for="inches">Screen Size (inches):</label>
  <input type="number" id="inches" name="inches" step="0.1" min="10" max="20" required>

  <label for="ppi">Calculated PPI:</label>
  <input type="text" id="ppi" name="ppi" readonly>

  <label for="cpu_brand">CPU Brand:</label>
  <select id="cpu_brand" name="cpu_brand" required>
      <option value="Intel Core i3">Intel Core i3</option>
      <option value="Intel Core i5">Intel Core i5</option>
      <option value="Intel Core i7">Intel Core i7</option>
      <option value="Other Intel Processor">Other Intel Processor</option>
      <option value="AMD Processor">AMD Processor</option>
  </select>

  <label for="hdd">HDD (GB):</label>
  <select id="hdd" name="hdd" required>
      <option value="0">0 GB</option>
      <option value="128">128 GB</option>
      <option value="500">500 GB</option>
      <option value="1000">1 TB</option>
  </select>

  <label for="ssd">SSD (GB):</label>
  <select id="ssd" name="ssd" required>
      <option value="0">0 GB</option>
      <option value="128">128 GB</option>
      <option value="256">256 GB</option>
      <option value="512">512 GB</option>
  </select>

  <label for="gpu_brand">GPU Brand:</label>
  <select id="gpu_brand" name="gpu_brand" required>
      <option value="Intel">Intel</option>
      <option value="AMD">AMD</option>
      <option value="Nvidia">Nvidia</option>
  </select>

  <label for="os">Operating System:</label>
  <select id="os" name="os" required>
      <option value="Windows">Windows</option>
      <option value="Others/No OS/Linux">Others/No OS/Linux</option>
      <option value="Mac">Mac</option>
  </select>

  <button type="submit">Predict Price</button>
</form> -->


<form action="{% url 'laptop' %}" method="POST">
  {% csrf_token %}
  
  <div class="form-group">
      <label for="company">Company:</label>
      <select id="company" name="company" class="form-control" required>
          <option value="Lenovo">Lenovo</option>
          <option value="Dell">Dell</option>
          <option value="Asus">Asus</option>
          <option value="Acer">Acer</option>
          <option value="HP">HP</option>
          <option value="Apple">Apple</option>
          <option value="Toshiba">Toshiba</option>
          <option value="MSI">MSI</option>
          <option value="Samsung">Samsung</option>
          <option value="Mediacom">Mediacom</option>
          <option value="Vero">Vero</option>
          <option value="Xiaomi">Xiaomi</option>
          <option value="Razer">Razer</option>
      </select>
  </div>

  <div class="form-group">
      <label for="typename">Type:</label>
      <select id="typename" name="typename" class="form-control" required>
          <option value="Notebook">Notebook</option>
          <option value="Ultrabook">Ultrabook</option>
          <option value="2 in 1 Convertible">2 in 1 Convertible</option>
          <option value="Gaming">Gaming</option>
          <option value="Netbook">Netbook</option>
          <option value="Workstation">Workstation</option>
      </select>
  </div>

  <div class="form-group">
      <label for="ram">RAM (GB):</label>
      <select id="ram" name="ram" class="form-control" required>
          <option value="4">4 GB</option>
          <option value="8">8 GB</option>
          <option value="16">16 GB</option>
          <option value="32">32 GB</option>
      </select>
  </div>

  <div class="form-group">
      <label for="weight">Weight (kg):</label>
      <input type="number" id="weight" name="weight" class="form-control" step="0.1" min="0" max="10" required>
  </div>

  <div class="form-group">
      <label for="touchscreen">Touchscreen:</label>
      <select id="touchscreen" name="touchscreen" class="form-control" required>
          <option value="1">Yes</option>
          <option value="0">No</option>
      </select>
  </div>

  <div class="form-group">
      <label for="ips">IPS:</label>
      <select id="ips" name="ips" class="form-control" required>
          <option value="1">Yes</option>
          <option value="0">No</option>
      </select>
  </div>

  <div class="form-group">
      <label for="resolution">Screen Resolution:</label>
      <select id="resolution" name="resolution" class="form-control" required onchange="calculateResolution()">
          <option value="2560x1600">2560x1600</option>
          <option value="1440x900">1440x900</option>
          <option value="1920x1080">1920x1080</option>
          <option value="2880x1800">2880x1800</option>
          <option value="1366x768">1366x768</option>
          <option value="3200x1800">3200x1800</option>
      </select>
  </div>

  <input type="hidden" id="x_res" name="x_res">
  <input type="hidden" id="y_res" name="y_res">

  <div class="form-group">
      <label for="inches">Screen Size (inches):</label>
      <input type="number" id="inches" name="inches" class="form-control" step="0.1" min="10" max="20" required>
  </div>

  <div class="form-group">
      <label for="ppi">Calculated PPI:</label>
      <input type="text" id="ppi" name="ppi" class="form-control" readonly>
  </div>

  <div class="form-group">
      <label for="cpu_brand">CPU Brand:</label>
      <select id="cpu_brand" name="cpu_brand" class="form-control" required>
          <option value="Intel Core i3">Intel Core i3</option>
          <option value="Intel Core i5">Intel Core i5</option>
          <option value="Intel Core i7">Intel Core i7</option>
          <option value="Other Intel Processor">Other Intel Processor</option>
          <option value="AMD Processor">AMD Processor</option>
      </select>
  </div>

  <div class="form-group">
      <label for="hdd">HDD (GB):</label>
      <select id="hdd" name="hdd" class="form-control" required>
          <option value="0">0 GB</option>
          <option value="128">128 GB</option>
          <option value="500">500 GB</option>
          <option value="1000">1 TB</option>
      </select>
  </div>

  <div class="form-group">
      <label for="ssd">SSD (GB):</label>
      <select id="ssd" name="ssd" class="form-control" required>
          <option value="0">0 GB</option>
          <option value="128">128 GB</option>
          <option value="256">256 GB</option>
          <option value="512">512 GB</option>
      </select>
  </div>

  <div class="form-group">
      <label for="gpu_brand">GPU Brand:</label>
      <select id="gpu_brand" name="gpu_brand" class="form-control" required>
          <option value="Intel">Intel</option>
          <option value="AMD">AMD</option>
          <option value="Nvidia">Nvidia</option>
      </select>
  </div>

  <div class="form-group">
      <label for="os">Operating System:</label>
      <select id="os" name="os" class="form-control" required>
          <option value="Windows">Windows</option>
          <option value="Others/No OS/Linux">Others/No OS/Linux</option>
          <option value="Mac">Mac</option>
      </select>
  </div>

  {% comment %} <button type="submit" class="btn btn-primary">Predict Price</button> {% endcomment %}
  <div class="text-center">
    <button type="submit" class="btn btn-primary" style="background-color: #2266a8; border-color: #2266a8;">Predict Price</button>
</div>


</form>


<br>

<div  class="text-center" id="prediction-result"></div>

 

<script>
  function calculateResolution() {
      let resolution = document.getElementById("resolution").value;
      let [x_res, y_res] = resolution.split("x").map(Number);
      document.getElementById("x_res").value = x_res;
      document.getElementById("y_res").value = y_res;
  }

  function calculatePPI() {
      let resolution = document.getElementById("resolution").value;
      let inches = parseFloat(document.getElementById("inches").value);

      if (resolution && inches > 0) {
          let [x_res, y_res] = resolution.split("x").map(Number);
          let ppi = Math.sqrt((x_res ** 2) + (y_res ** 2)) / inches;
          document.getElementById("ppi").value = ppi.toFixed(2);
      } else {
          document.getElementById("ppi").value = "";
      }
  }

  document.getElementById("resolution").addEventListener("change", calculatePPI);
  document.getElementById("inches").addEventListener("input", calculatePPI);
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
      document.querySelector("form").addEventListener("submit", function (event) {
          event.preventDefault();  // Prevent page reload
  
          let formData = new FormData(this);  // Get form data
  
          fetch("{% url 'laptop' %}", {
              method: "POST",
              body: formData,
              headers: {
                  "X-CSRFToken": document.querySelector("[name=csrfmiddlewaretoken]").value
              }
          })
          .then(response => response.json())
.then(data => {
    if (data.predicted_price) {
        let price = Math.round(data.predicted_price);  // Round off to nearest integer
        let minPrice = price - 5000;
        let maxPrice = price + 5000;

        document.getElementById("prediction-result").innerHTML = 
            `<p><strong>Estimated Price Range:</strong> ₹${minPrice} - ₹${maxPrice}</p>`;
    } else if (data.error) {
        document.getElementById("prediction-result").innerHTML = 
            `<p style="color: red;">Error: ${data.error}</p>`;
    }
})
.catch(error => console.error("Error:", error));
      });
  });
  </script>
  
      

  

  <footer>
    <div class="footer-dots">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
    <p>&copy; 2025 Smart Recommender. All rights reserved.</p>
  </footer>

  <!-- Load JavaScript at the bottom for better performance -->
  <script src="{% static 'js/landing_script.js' %}"></script>

</body>
</html>
